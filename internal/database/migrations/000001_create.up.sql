CREATE TABLE ROLES (
    ID          NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME        VARCHAR2(100) NOT NULL UNIQUE
);

CREATE TABLE USERS (
    ID              RAW(16) DEFAULT SYS_GUID() PRIMARY KEY,
    LOGIN           VARCHAR2(100) NOT NULL UNIQUE,
    EMAIL           VARCHAR2(30) NOT NULL UNIQUE,
    PASSWORD   		VARCHAR2(255) NOT NULL,
    ROLE_ID         NUMBER NOT NULL,
    CREATED_AT      DATE DEFAULT SYSDATE NOT NULL,
    UPDATED_AT      DATE,
    CONSTRAINT FK_USERS_ROLE
        FOREIGN KEY (ROLE_ID)
        REFERENCES ROLES(ID)
);

CREATE TABLE PRODUCT_TYPES (
    ID      NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME    VARCHAR2(100) NOT NULL UNIQUE
);

CREATE TABLE PRODUCTS
(
    ID              RAW(16) DEFAULT SYS_GUID() PRIMARY KEY,
    SKU             VARCHAR2(100)           NOT NULL UNIQUE,
    NAME            VARCHAR2(255)           NOT NULL,
    STOCK           NUMBER  DEFAULT 0,
    PRODUCT_TYPE_ID NUMBER                  NOT NULL,
    IMAGE_URL       VARCHAR2(500),
    CREATED_AT      DATE    DEFAULT SYSDATE NOT NULL,
    UPDATED_AT      DATE,
    CREATED_BY      RAW(16)                 NOT NULL, -- кто создал
    UPDATED_BY      RAW(16),                          -- кто изменил

    CONSTRAINT FK_PRODUCTS_PRODUCT_TYPE
        FOREIGN KEY (PRODUCT_TYPE_ID)
            REFERENCES PRODUCT_TYPES (ID),

    CONSTRAINT FK_PRODUCTS_CREATED_BY
        FOREIGN KEY (CREATED_BY)
            REFERENCES USERS (ID),

    CONSTRAINT FK_PRODUCTS_UPDATED_BY
        FOREIGN KEY (UPDATED_BY)
            REFERENCES USERS (ID)
);